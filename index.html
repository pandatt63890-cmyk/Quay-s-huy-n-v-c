<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huy·ªÅn V·ª±c - ƒê·ªãnh M·ªánh</title>
    <style>
        :root { --primary: #D1D1FB; --dark: #4A4A8A; --bg: #F3F3FF; }
        body { background: var(--bg); color: var(--dark); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; padding: 20px; }
        .container { text-align: center; border: 2px solid var(--primary); padding: 30px; border-radius: 25px; background: white; box-shadow: 0 10px 30px rgba(209,209,251,0.5); width: 100%; max-width: 450px; }
        h1 { margin-bottom: 5px; letter-spacing: 2px; }
        #result { font-size: 1.3em; min-height: 120px; margin: 20px 0; color: #5D5D9D; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 600; border: 2px solid #F0F0FF; border-radius: 15px; padding: 15px; background: #FAFAFF; }
        
        /* N√∫t quay ch√≠nh */
        .main-btn { background: var(--primary); color: var(--dark); border: none; padding: 18px; font-size: 1.2em; cursor: pointer; border-radius: 50px; transition: 0.3s; width: 100%; font-weight: bold; box-shadow: 0 4px 15px rgba(209,209,251,0.4); margin-bottom: 15px; }
        .main-btn:disabled { background: #E0E0E0; color: #999; cursor: not-allowed; }
        
        /* N√∫t Reset r√µ r√†ng */
        .reset-btn { background: #FFB3B3; color: #900; border: none; padding: 10px 20px; font-size: 0.9em; cursor: pointer; border-radius: 10px; font-weight: bold; width: 100%; transition: 0.2s; }
        .reset-btn:hover { background: #FF8080; }

        .status { font-size: 0.85em; color: #8E8EBC; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>HUY·ªÄN V·ª∞C</h1>
        <p style="color: #A3A3D3; font-style: italic; font-size: 0.8em; margin-bottom: 20px;">‚Äî V·∫≠n m·ªánh n·∫±m trong tay b·∫°n ‚Äî</p>
        
        <div id="result">H·ªá th·ªëng ƒë√£ s·∫µn s√†ng...</div>
        
        <button id="spinBtn" class="main-btn" onclick="spin()">KHAI THI√äN L·∫¨P ƒê·ªäA</button>
        
        <button class="reset-btn" onclick="resetList()">L√ÄM M·ªöI TO√ÄN B·ªò DANH S√ÅCH</button>
        
        <div class="status" id="count">ƒêang t·∫£i...</div>
    </div>

    <script>
        const STORAGE_KEY = 'HUYENVUC_FINAL_V4';

        // DANH S√ÅCH CHI TI·∫æT S·ªê L∆Ø·ª¢NG
        const config = [
            { name: "üëë Nh√¢n Gi·ªõi: Ho√†ng ƒê·∫ø", qty: 1 },
            { name: "üíê Nh√¢n Gi·ªõi: Ho√†ng H·∫≠u", qty: 1 },
            { name: "üå∫ Nh√¢n Gi·ªõi: Ho√†ng Qu√Ω Phi", qty: 1 },
            { name: "üå∑ Nh√¢n Gi·ªõi: Qu√Ω Phi", qty: 2 },
            { name: "ü§¥ Nh√¢n Gi·ªõi: Th√°i t·ª≠", qty: 1 },
            { name: "üìú Tri·ªÅu ƒë√¨nh: Th·ª´a T∆∞·ªõng", qty: 1 },
            { name: "‚öîÔ∏è Tri·ªÅu ƒë√¨nh: Nguy√™n So√°i", qty: 1 },
            { name: "üè∞ Cung: Mama", qty: 2 },
            { name: "üåø L√†ng Y√™n H·∫°: ƒê·∫°i phu", qty: 2 },
            { name: "üåø L√†ng Giang Y·∫øt: ƒê·∫°i phu", qty: 2 },
            { name: "üåø L√†ng ƒêoan Di: ƒê·∫°i phu", qty: 2 },
            { name: "üßô‚Äç‚ôÇÔ∏è L√†ng Y√™n H·∫°: Tr∆∞·ªüng l√£o", qty: 4 },
            { name: "üßô‚Äç‚ôÇÔ∏è L√†ng Giang Y·∫øt: Tr∆∞·ªüng l√£o", qty: 4 },
            { name: "üßô‚Äç‚ôÇÔ∏è L√†ng ƒêoan Di: Tr∆∞·ªüng l√£o", qty: 4 },
            { name: "üë∫ Ma Gi·ªõi: Th·∫≠p Nh·ªã T√† Th·∫ßn", qty: 12 },
            { name: "üêâ Th·∫ßn Th√∫: Thanh Long", qty: 1 },
            { name: "üê¢ Th·∫ßn Th√∫: Huy·ªÅn V≈©", qty: 1 },
            { name: "ü¶ö Th·∫ßn Th√∫: Chu T∆∞·ªõc", qty: 1 },
            { name: "üåì √Çm Gi·ªõi: B·∫°ch V√¥ th∆∞·ªùng", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: Long t·ªôc (Long S∆°n)", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: ƒêi·ªÉu t·ªôc (Phi Phong Lƒ©nh)", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: Nh√¢n ng∆∞ (ƒê√¥ng H·∫£i)", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: H·ªì ly (ƒê·ªông B√†n Uy·ªÉn)", qty: 1 }
        ];

        function generateFullList() {
            let list = [];
            config.forEach(item => {
                for(let i=0; i<item.qty; i++) { list.push(item.name); }
            });
            return list;
        }

        let availableChars = JSON.parse(localStorage.getItem(STORAGE_KEY)) || generateFullList();

        function updateUI() {
            document.getElementById('count').innerText = `C√≤n l·∫°i: ${availableChars.length} su·∫•t cƒÉn c·ªët`;
            const btn = document.getElementById('spinBtn');
            if (availableChars.length === 0) {
                document.getElementById('result').innerText = "V·∫†N V·∫¨T ƒê√É ƒê·ªäNH - H·∫æT SU·∫§T!";
                btn.disabled = true;
            } else { btn.disabled = false; }
        }

        function spin() {
            const btn = document.getElementById('spinBtn');
            const res = document.getElementById('result');
            btn.disabled = true;

            let i = 0;
            const timer = setInterval(() => {
                res.innerText = availableChars[Math.floor(Math.random() * availableChars.length)];
                i++;
                if (i > 25) {
                    clearInterval(timer);
                    const idx = Math.floor(Math.random() * availableChars.length);
                    const chosen = availableChars[idx];
                    res.innerHTML = `V·∫≠n m·ªánh an b√†i:<br><span style="color:#7A7ACD; font-size:1.2em;">‚ú® ${chosen} ‚ú®
