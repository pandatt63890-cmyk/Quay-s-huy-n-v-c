<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huy·ªÅn V·ª±c - V√≤ng Quay ƒê·ªãnh M·ªánh</title>
    <style>
        :root { --primary-purple: #D1D1FB; --dark-purple: #4A4A8A; --bg-color: #F3F3FF; }
        body { background-color: var(--bg-color); color: var(--dark-purple); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background-image: linear-gradient(135deg, #E6E6FA 0%, #F3F3FF 100%); padding: 20px; }
        .container { text-align: center; border: 2px solid var(--primary-purple); padding: 30px; border-radius: 25px; background: white; box-shadow: 0 10px 30px rgba(209,209,251,0.5); width: 100%; max-width: 500px; }
        #result { font-size: 1.3em; min-height: 120px; margin: 20px 0; color: #5D5D9D; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 600; border: 2px solid #F0F0FF; border-radius: 15px; padding: 15px; background: #FAFAFF; }
        button { background: var(--primary-purple); color: var(--dark-purple); border: none; padding: 15px 30px; font-size: 1.1em; cursor: pointer; border-radius: 50px; transition: 0.3s; width: 100%; font-weight: bold; box-shadow: 0 4px 15px rgba(209,209,251,0.4); }
        button:disabled { background: #E0E0E0 !important; color: #999 !important; cursor: not-allowed; transform: none !important; }
        .status { font-size: 0.85em; color: #8E8EBC; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>HUY·ªÄN V·ª∞C</h1>
        <div id="result">H·ªá th·ªëng ƒë√£ s·∫µn s√†ng...</div>
        <button id="spinBtn" onclick="spin()">KHAI THI√äN L·∫¨P ƒê·ªäA</button>
        <div class="status" id="count">ƒêang ki·ªÉm tra cƒÉn c·ªët...</div>
    </div>

    <script>
        // DANH S√ÅCH NH√ÇN V·∫¨T ƒê·∫¶Y ƒê·ª¶
        const originalChars = [
            "‚ú® Thi√™n Gi·ªõi: Ho√†ng t·ª≠/C√¥ng ch√∫a", "‚ú® Thi√™n Gi·ªõi: ƒê√¥ng Thi√™n V∆∞∆°ng ‚Äº", "‚ú® Thi√™n Gi·ªõi: T√¢y Thi√™n V∆∞∆°ng ‚Äº",
            "üêâ Th·∫ßn Th√∫: Thanh Long", "üê¢ Th·∫ßn Th√∫: Huy·ªÅn V≈©", "ü¶ö Th·∫ßn Th√∫: Chu T∆∞·ªõc",
            "üî• Th·∫ßn: H·ªèa Th·∫ßn", "üíß Th·∫ßn: Th·ªßy Th·∫ßn", "‚ö° Th·∫ßn: L√¥i Th·∫ßn", "‚õ∞Ô∏è Th·∫ßn: ƒê·ªãa Th·∫ßn",
            "üçë Ti√™n: Th·∫≠p nh·ªã ti√™n c√¥", "üõ°Ô∏è T·ªôc: Long t·ªôc", "üõ°Ô∏è T·ªôc: H·ªì t·ªôc",
            "üëë Nh√¢n Gi·ªõi: Ho√†ng ƒê·∫ø ‚Äº", "üíê Nh√¢n Gi·ªõi: Ho√†ng H·∫≠u ‚Äº", "ü§¥ Nh√¢n Gi·ªõi: Th√°i t·ª≠ ‚Äº",
            "üìú Tri·ªÅu ƒë√¨nh: Qu·ªëc S∆∞", "üìú Tri·ªÅu ƒë√¨nh: Th·ª´a T∆∞·ªõng", "‚öîÔ∏è Tri·ªÅu ƒë√¨nh: Nguy√™n So√°i",
            "‚òòÔ∏è L√†ng Y√™n H·∫°: Tr∆∞·ªüng l√†ng", "üçä L√†ng Giang Y·∫øt: Tr∆∞·ªüng l√†ng", "‚ùÑÔ∏è L√†ng ƒêoan Di: Tr∆∞·ªüng l√†ng",
            "ü¶ä Y√™u Gi·ªõi: H·ªì ly", "üßú Y√™u Gi·ªõi: Nh√¢n ng∆∞", "üëπ Ma Gi·ªõi: Ma th·∫ßn", "‚öñÔ∏è √Çm Gi·ªõi: Di√™m La"
        ];

        // D√πng t√™n b·ªô nh·ªõ DUY NH·∫§T ƒë·ªÉ tr√°nh b·ªã k·∫πt
        const KEY = 'HUYENVUC_FIX_FINAL';

        // L·∫•y d·ªØ li·ªáu, n·∫øu kh√¥ng c√≥ th√¨ n·∫°p m·ªõi 100%
        let availableChars = JSON.parse(localStorage.getItem(KEY));
        if (!availableChars || availableChars.length === 0) {
            availableChars = [...originalChars];
            localStorage.setItem(KEY, JSON.stringify(availableChars));
        }

        function updateUI() {
            document.getElementById('count').innerText = `C√≤n l·∫°i: ${availableChars.length} cƒÉn c·ªët`;
            const btn = document.getElementById('spinBtn');
            if (availableChars.length === 0) {
                document.getElementById('result').innerText = "H·∫æT NH√ÇN V·∫¨T!";
                btn.disabled = true;
            } else {
                btn.disabled = false;
            }
        }

        function spin() {
            const btn = document.getElementById('spinBtn');
            const res = document.getElementById('result');
            btn.disabled = true;

            let i = 0;
            const timer = setInterval(() => {
                res.innerText = availableChars[Math.floor(Math.random() * availableChars.length)];
                i++;
                if (i > 20) {
                    clearInterval(timer);
                    const idx = Math.floor(Math.random() * availableChars.length);
                    const chosen = availableChars[idx];
                    res.innerHTML = `V·∫≠n m·ªánh an b√†i:<br><span style="color:#7A7ACD; font-size:1.2em;">‚ú® ${chosen} ‚ú®</span>`;
                    
                    availableChars.splice(idx, 1);
                    localStorage.setItem(KEY, JSON.stringify(availableChars));
                    updateUI();
                }
            }, 50);
        }

        updateUI(); // Ch·∫°y ngay khi t·∫£i trang
    </script>
</body>
</html>
