<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huy·ªÅn V·ª±c - V√≤ng Quay ƒê·ªãnh M·ªánh</title>
    <style>
        :root { --primary-purple: #D1D1FB; --dark-purple: #4A4A8A; --bg-color: #F3F3FF; }
        body { background-color: var(--bg-color); color: var(--dark-purple); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background-image: linear-gradient(135deg, #E6E6FA 0%, #F3F3FF 100%); padding: 20px; }
        .container { text-align: center; border: 2px solid var(--primary-purple); padding: 30px; border-radius: 25px; background: white; box-shadow: 0 10px 30px rgba(209,209,251,0.5); width: 100%; max-width: 500px; }
        h1 { font-size: 1.8em; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; }
        #result { font-size: 1.3em; min-height: 120px; margin: 20px 0; color: #5D5D9D; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 600; border: 2px solid #F0F0FF; border-radius: 15px; padding: 15px; background: #FAFAFF; line-height: 1.4; }
        button { background: var(--primary-purple); color: var(--dark-purple); border: none; padding: 15px 30px; font-size: 1.1em; cursor: pointer; border-radius: 50px; transition: 0.3s; width: 100%; font-weight: bold; box-shadow: 0 4px 15px rgba(209,209,251,0.4); }
        button:disabled { background: #E0E0E0 !important; color: #999 !important; cursor: not-allowed; }
        .status { font-size: 0.85em; color: #8E8EBC; margin-top: 10px; }
        .reset-btn { background: transparent; color: #BDBDBD; border: 1px solid #E0E0E0; font-size: 0.75em; padding: 5px 15px; margin-top: 20px; cursor: pointer; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>HUY·ªÄN V·ª∞C</h1>
        <p style="color: #A3A3D3; font-style: italic; font-size: 0.8em;">‚Äî ƒê·ªãnh m·ªánh lu√¢n h·ªìi, nh√¢n s·ªë h·ªØu h·∫°n ‚Äî</p>
        <div id="result">V√≤ng xoay ƒëang ch·ªù ƒë·ª£i...</div>
        <button id="spinBtn" onclick="spin()">KHAI THI√äN L·∫¨P ƒê·ªäA</button>
        <div class="status" id="count">ƒêang t·∫£i nh√¢n s·ªë...</div>
        <button class="reset-btn" onclick="resetList()">L√ÄM M·ªöI DANH S√ÅCH</button>
    </div>

    <script>
        const STORAGE_KEY = 'HUYENVUC_QUANTITY_V1';

        // C·∫§U H√åNH S·ªê L∆Ø·ª¢NG CHI TI·∫æT
        const config = [
            { name: "üëë Nh√¢n Gi·ªõi: Ho√†ng ƒê·∫ø", qty: 1 },
            { name: "üíê Nh√¢n Gi·ªõi: Ho√†ng H·∫≠u", qty: 1 },
            { name: "üå∫ Nh√¢n Gi·ªõi: Ho√†ng Qu√Ω Phi", qty: 1 },
            { name: "üå∑ Nh√¢n Gi·ªõi: Qu√Ω Phi", qty: 2 },
            { name: "ü§¥ Nh√¢n Gi·ªõi: Th√°i t·ª≠", qty: 1 },
            { name: "üèµÔ∏è Nh√¢n Gi·ªõi: Th√°i t·ª≠ phi", qty: 1 },
            { name: "üìú Tri·ªÅu ƒë√¨nh: Qu·ªëc S∆∞", qty: 1 },
            { name: "üìú Tri·ªÅu ƒë√¨nh: Th·ª´a T∆∞·ªõng", qty: 1 },
            { name: "‚öîÔ∏è Tri·ªÅu ƒë√¨nh: Nguy√™n So√°i", qty: 1 },
            { name: "üè∞ Cung: C√¥ng c√¥ng", qty: 1 },
            { name: "üè∞ Cung: T·ªïng qu·∫£n", qty: 1 },
            { name: "üè∞ Cung: Mama", qty: 2 },
            { name: "üè∞ Cung: Th√°i y", qty: 5 },
            { name: "üåø L√†ng Y√™n H·∫°: ƒê·∫°i phu", qty: 2 },
            { name: "üåø L√†ng Giang Y·∫øt: ƒê·∫°i phu", qty: 2 },
            { name: "üåø L√†ng ƒêoan Di: ƒê·∫°i phu", qty: 2 },
            { name: "üßô‚Äç‚ôÇÔ∏è L√†ng Y√™n H·∫°: Tr∆∞·ªüng l√£o", qty: 4 },
            { name: "üßô‚Äç‚ôÇÔ∏è L√†ng Giang Y·∫øt: Tr∆∞·ªüng l√£o", qty: 4 },
            { name: "üßô‚Äç‚ôÇÔ∏è L√†ng ƒêoan Di: Tr∆∞·ªüng l√£o", qty: 4 },
            { name: "üëπ Ma Gi·ªõi: Th·∫≠p Nh·ªã T√† Th·∫ßn", qty: 12 },
            { name: "üêâ Th·∫ßn Th√∫: Thanh Long", qty: 1 },
            { name: "üê¢ Th·∫ßn Th√∫: Huy·ªÅn V≈©", qty: 1 },
            { name: "ü¶ö Th·∫ßn Th√∫: Chu T∆∞·ªõc", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: Long t·ªôc (Long S∆°n)", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: H·ªì t·ªôc (V·∫°n C·ªëc S∆°n)", qty: 1 },
            { name: "üõ°Ô∏è T·ªôc: ƒêi·ªÉu t·ªôc (Phi Phong Lƒ©nh)", qty: 1 },
            // Th√™m c√°c vai tr√≤ kh√°c v·ªõi s·ªë l∆∞·ª£ng m·∫∑c ƒë·ªãnh l√† 5 n·∫øu kh√¥ng ghi r√µ
            { name: "‚ú® Thi√™n Gi·ªõi: ƒê√¥ng Thi√™n V∆∞∆°ng", qty: 1 },
            { name: "‚ú® Thi√™n Gi·ªõi: T√¢y Thi√™n V∆∞∆°ng", qty: 1 },
            { name: "‚öñÔ∏è √Çm Gi·ªõi: B·∫°ch V√¥ th∆∞·ªùng", qty: 1 }
        ];

        // H√†m t·∫°o danh s√°ch d·ª±a tr√™n s·ªë l∆∞·ª£ng
        function generateFullList() {
            let list = [];
            config.forEach(item => {
                for(let i=0; i<item.qty; i++) {
                    list.push(item.name);
                }
            });
            return list;
        }

        let availableChars = JSON.parse(localStorage.getItem(STORAGE_KEY)) || generateFullList();

        function updateUI() {
            document.getElementById('count').innerText = `C√≤n l·∫°i: ${availableChars.length} su·∫•t cƒÉn c·ªët`;
            const btn = document.getElementById('spinBtn');
            if (availableChars.length === 0) {
                document.getElementById('result').innerText = "V·∫¨N M·ªÜNH ƒê√É AN B√ÄI - H·∫æT SU·∫§T!";
                btn.disabled = true;
            } else {
                btn.disabled = false;
            }
        }

        function spin() {
            const btn = document.getElementById('spinBtn');
            const res = document.getElementById('result');
            btn.disabled = true;

            let i = 0;
            const timer = setInterval(() => {
                res.innerText = availableChars[Math.floor(Math.random() * availableChars.length)];
                i++;
                if (i > 25) {
                    clearInterval(timer);
                    const idx = Math.floor(Math.random() * availableChars.length);
                    const chosen = availableChars[idx];
                    res.innerHTML = `V·∫≠n m·ªánh g·ªçi t√™n:<br><span style="color:#7A7ACD; font-size:1.2em;">‚ú® ${chosen} ‚ú®</span>`;
                    
                    availableChars.splice(idx, 1);
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(availableChars));
                    updateUI();
                }
            }, 50);
        }

        function resetList() {
            if(confirm("L√†m m·ªõi l·∫°i to√†n b·ªô nh√¢n s·ªë c√°c t·ªôc?")) {
                availableChars = generateFullList();
                localStorage.setItem(STORAGE_KEY, JSON.stringify(availableChars));
                updateUI();
                document.getElementById('result').innerText = "H·ªá th·ªëng ƒë√£ reset!";
            }
        }

        updateUI();
    </script>
</body>
</html>
